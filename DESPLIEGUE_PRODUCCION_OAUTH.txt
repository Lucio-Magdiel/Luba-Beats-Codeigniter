â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸš€ DESPLIEGUE A PRODUCCIÃ“N - Google OAuth + Completar Perfil
  LubaBeats Beta
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ ARCHIVOS PREPARADOS:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… ZIP Creado: LubaBeats_Beta_Produccion.zip (0.19 MB)
âœ… Push a GitHub: Completado (commit 777ceb6)
âœ… Base de datos: database_add_google_oauth.sql

CONTENIDO DEL ZIP:
  ğŸ“ app/Controllers/Auth.php (mÃ©todos OAuth + completar perfil)
  ğŸ“ app/Views/auth/completar_perfil.php (NUEVO)
  ğŸ“ app/Config/Routes.php (rutas OAuth + completar perfil)
  ğŸ“ app/Models/UsuarioModel.php (campo verificado_google)
  ğŸ“ app/Libraries/ (si existen)
  ğŸ“ public/assets/css/pages/auth.css (estilos tarjetas)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“‹ PASO 1: SUBIR ARCHIVOS A CPANEL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Ir a cPanel â†’ File Manager

2. Navegar a: /public_html/chojin/

3. Subir el archivo: LubaBeats_Beta_Produccion.zip

4. Click derecho en el ZIP â†’ Extract

5. Sobrescribir archivos cuando pregunte

6. Eliminar el ZIP despuÃ©s de extraer

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“‹ PASO 2: ACTUALIZAR BASE DE DATOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Ir a cPanel â†’ phpMyAdmin

2. Seleccionar base de datos: luciotknegocios_chojin_bd

3. Click en pestaÃ±a "SQL"

4. Copiar y pegar este cÃ³digo:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ALTER TABLE usuarios                                    
â”‚ ADD COLUMN IF NOT EXISTS verificado_google TINYINT(1)   â”‚
â”‚ DEFAULT 0 AFTER bio;    

    
    ejecute este en su lugar, el codigo anteior me salio error

    SET @preparedStatement = (SELECT IF(
    (SELECT COUNT(*) FROM INFORMATION_SCHEMA.COLUMNS
    WHERE
        (table_name = 'usuarios')
        AND (table_schema = DATABASE())
        AND (column_name = 'verificado_google')
    ) > 0,
    "SELECT 1",
    "ALTER TABLE usuarios ADD verificado_google TINYINT(1) DEFAULT 0 AFTER bio;"
    ));

    PREPARE alterIfNotExists FROM @preparedStatement;
    EXECUTE alterIfNotExists;
    DEALLOCATE PREPARE alterIfNotExists;
                           
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5. Click en "Go" / "Ejecutar"

6. Verificar mensaje: "Campo agregado exitosamente"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“‹ PASO 3: CONFIGURAR CREDENCIALES DE GOOGLE EN .ENV
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. En cPanel File Manager, ir a: /public_html/chojin/

2. Buscar archivo: .env

3. Si NO existe, crear uno nuevo:
   â€¢ Click derecho â†’ Create New File
   â€¢ Nombre: .env
   â€¢ Copiar contenido del archivo .env local

4. Editar el archivo .env

5. Buscar la secciÃ³n de Google OAuth o agregar al final:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ #------------------------------------------------------ â”‚
â”‚ # GOOGLE OAUTH CONFIGURATION                           â”‚
â”‚ #------------------------------------------------------ â”‚
â”‚                                                          â”‚
â”‚ google.clientId = [TU_CLIENT_ID_COMPLETO]              â”‚
â”‚                                                          â”‚
â”‚ google.clientSecret = [TU_CLIENT_SECRET]               â”‚
â”‚                                                          â”‚
â”‚ google.redirectUri = https://lucio.tknegocios.com/      â”‚
â”‚ chojin/auth/google/callback                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

6. GUARDAR el archivo

âš ï¸ IMPORTANTE:
   â€¢ NO sobrescribir las configuraciones de base de datos
   â€¢ NO sobrescribir cloudinary.apiSecret
   â€¢ Solo AGREGAR las lÃ­neas de Google OAuth
   â€¢ Usar las credenciales reales de Google Cloud Console

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“‹ PASO 4: VERIFICAR CONFIGURACIÃ“N EN GOOGLE CLOUD CONSOLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Ir a: https://console.cloud.google.com/

2. Seleccionar proyecto: LubaBeats Beta

3. "APIs y servicios" â†’ "Credenciales"

4. Click en tu cliente OAuth

5. Verificar que estÃ© configurado:

   ORÃGENES AUTORIZADOS:
   âœ“ http://localhost
   âœ“ https://lucio.tknegocios.com

   URIs DE REDIRECCIONAMIENTO:
   âœ“ http://localhost/CHOJIN/public/auth/google/callback
   âœ“ https://lucio.tknegocios.com/chojin/auth/google/callback

6. Si falta la URI de producciÃ³n, agregarla y GUARDAR

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“‹ PASO 5: PROBAR EN PRODUCCIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Abrir navegador en modo incÃ³gnito

2. Ir a: https://lucio.tknegocios.com/chojin/auth/login

3. Verificar que aparezca el botÃ³n "Continuar con Google"

4. Click en "Continuar con Google"

5. Seleccionar una cuenta de Google (no magdiel@gmail.com)

6. Autorizar la aplicaciÃ³n

7. DeberÃ­as ver el formulario "Completar Perfil" con:
   âœ“ Email verificado mostrado
   âœ“ Campo de nombre de usuario
   âœ“ 3 tarjetas interactivas (Productor / Artista / Usuario)
   âœ“ Check verde al seleccionar
   âœ“ BotÃ³n "Comenzar en LubaBeats Beta"

8. Completar el formulario y enviar

9. Verificar redirecciÃ³n segÃºn tipo:
   â€¢ Productor â†’ /productor/panel
   â€¢ Artista â†’ /artista/panel
   â€¢ Usuario â†’ /catalogo

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ› SOLUCIÃ“N DE PROBLEMAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROBLEMA 1: "redirect_uri_mismatch"
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CAUSA: La URI de producciÃ³n no estÃ¡ en Google Console   â”‚
â”‚                                                          â”‚
â”‚ SOLUCIÃ“N:                                                â”‚
â”‚ 1. Ir a Google Cloud Console                            â”‚
â”‚ 2. Credenciales â†’ Tu cliente OAuth â†’ Editar             â”‚
â”‚ 3. Agregar URI exacta:                                  â”‚
â”‚    https://lucio.tknegocios.com/chojin/auth/google/     â”‚
â”‚    callback                                              â”‚
â”‚ 4. GUARDAR                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PROBLEMA 2: "Access blocked: This app's request is invalid"
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CAUSA: Usuario no estÃ¡ en lista de pruebas              â”‚
â”‚                                                          â”‚
â”‚ SOLUCIÃ“N:                                                â”‚
â”‚ 1. Google Cloud Console                                 â”‚
â”‚ 2. "Pantalla de consentimiento"                         â”‚
â”‚ 3. Usuarios de prueba â†’ Agregar usuarios                â”‚
â”‚ 4. Agregar el correo que estÃ¡s probando                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PROBLEMA 3: PÃ¡gina en blanco o error 500
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CAUSA: Error en .env o archivos no subidos              â”‚
â”‚                                                          â”‚
â”‚ SOLUCIÃ“N:                                                â”‚
â”‚ 1. Verificar que .env tenga las 3 lÃ­neas de Google      â”‚
â”‚ 2. Verificar permisos de archivos (644 para .env)       â”‚
â”‚ 3. Revisar logs en: writable/logs/                      â”‚
â”‚ 4. Verificar que composer.json tenga league/oauth2      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PROBLEMA 4: "Class Google not found"
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CAUSA: LibrerÃ­a OAuth no instalada en producciÃ³n        â”‚
â”‚                                                          â”‚
â”‚ SOLUCIÃ“N:                                                â”‚
â”‚ 1. Conectar por SSH (si tienes acceso)                  â”‚
â”‚ 2. cd /public_html/chojin/                              â”‚
â”‚ 3. composer install                                     â”‚
â”‚                                                          â”‚
â”‚ Si NO tienes SSH:                                        â”‚
â”‚ 1. Descargar vendor/ completo del local                 â”‚
â”‚ 2. Subir vendor/ a producciÃ³n vÃ­a FTP/cPanel            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PROBLEMA 5: Formulario no se ve bien
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CAUSA: CSS no se actualizÃ³                              â”‚
â”‚                                                          â”‚
â”‚ SOLUCIÃ“N:                                                â”‚
â”‚ 1. Verificar que auth.css se subiÃ³ correctamente        â”‚
â”‚ 2. Limpiar cachÃ© del navegador (Ctrl+Shift+R)           â”‚
â”‚ 3. Verificar ruta: public/assets/css/pages/auth.css     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  âœ… CHECKLIST DE DESPLIEGUE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ARCHIVOS:
â–¡ ZIP subido a cPanel
â–¡ ZIP extraÃ­do en /public_html/chojin/
â–¡ ZIP eliminado despuÃ©s de extraer
â–¡ Archivos verificados (Controllers, Views, Config, Models, CSS)

BASE DE DATOS:
â–¡ Campo verificado_google agregado a tabla usuarios
â–¡ Script SQL ejecutado exitosamente en phpMyAdmin

CONFIGURACIÃ“N:
â–¡ Archivo .env existe en producciÃ³n
â–¡ Credenciales de Google agregadas a .env
â–¡ redirectUri apunta a lucio.tknegocios.com
â–¡ .env guardado correctamente

GOOGLE CLOUD:
â–¡ URI de producciÃ³n agregada a Google Console
â–¡ OrÃ­genes autorizados actualizados
â–¡ Cambios guardados en Google Console

PRUEBAS:
â–¡ Login con Google funciona
â–¡ Formulario "Completar Perfil" aparece
â–¡ Tarjetas interactivas funcionan
â–¡ Check verde aparece al seleccionar
â–¡ ValidaciÃ³n de nombre de usuario funciona
â–¡ Usuario se crea correctamente
â–¡ RedirecciÃ³n segÃºn tipo funciona

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“Š RESUMEN DE CAMBIOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

NUEVAS FUNCIONALIDADES:
  âœ… Login con Google OAuth (100% gratis)
  âœ… Formulario de completar perfil para usuarios nuevos
  âœ… ValidaciÃ³n de nombre de usuario Ãºnico
  âœ… SelecciÃ³n de tipo de cuenta con tarjetas premium
  âœ… Animaciones y efectos visuales
  âœ… Check verde al seleccionar tipo
  âœ… Responsive en mÃ³vil

ARCHIVOS NUEVOS:
  ğŸ“„ app/Views/auth/completar_perfil.php
  ğŸ“„ database_add_google_oauth.sql
  ğŸ“„ SISTEMA_COMPLETAR_PERFIL.txt (documentaciÃ³n)

ARCHIVOS MODIFICADOS:
  ğŸ“ app/Controllers/Auth.php
  ğŸ“ app/Config/Routes.php
  ğŸ“ app/Models/UsuarioModel.php
  ğŸ“ public/assets/css/pages/auth.css

BASE DE DATOS:
  ğŸ—ƒï¸ Campo nuevo: usuarios.verificado_google (TINYINT)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ¯ SIGUIENTE PASO DESPUÃ‰S DE DESPLEGAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Probar el flujo completo en producciÃ³n
2. Crear un usuario de prueba con Google
3. Verificar que el perfil se complete correctamente
4. Probar los 3 tipos de cuenta (Productor/Artista/Usuario)
5. Verificar que las redirecciones funcionen
6. Celebrar ğŸ‰

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Desarrollado por Magdiel UCHIHA
LubaBeats Beta Â© 2025
